language: node_js
node_js: 4
env:
  - CXX=g++-4.8
  matrix:
    - JOB=unit
    - JOB=lint
    - JOB=build-web
addons:
 apt:
  sources:
   - ubuntu-toolchain-r-test
  packages:
   - g++-4.8
cache:
  directories:
  - BusDriveApp/node_modules

before_install:
 cd BusDriveApp
install:
 - npm install karma
 - npm install jasmine
 - npm install cordova
 - npm install ionic@beta
 - npm install gulp
  
script: 
 - ../scripts/build_travis.sh
 
after_script:
 - cat ./test/reports/coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js
after_success:
 - coveralls
deploy:
 skip_cleanup: true